#include <array>

constexpr int CONTROL_ROOM_RESPONSE_SIZE{8};
constexpr int BAUD_RATE{9600};

constexpr char CTRL_ACTI[] = "CtrlActi";  // Control Activities
constexpr char TEST_ACTI[] = "TestActi";  // Test Activities

std::array<char, 16> dataIn;
String incoming_Signal;

void setup() {
    Serial1.begin(BAUD_RATE);  // Start Serial1 for communication with Control Room
    
    // Send TestActi until we receive CtrlActi
    while (incoming_Signal != CTRL_ACTI) {
        if (Serial1.available() >= CONTROL_ROOM_RESPONSE_SIZE) {
            Serial1.readBytes(dataIn.data(), CONTROL_ROOM_RESPONSE_SIZE);  // Read incoming signal into dataIn array
            incoming_Signal = String(dataIn.data());  // Convert the array to an Arduino String
            continue;
        }
        Serial1.print(TEST_ACTI);  // Send TestActi
        delay(1000);
    }
    
    Serial.println("Comms Established!");
}

void loop() {
    // Main loop code can go here
}
